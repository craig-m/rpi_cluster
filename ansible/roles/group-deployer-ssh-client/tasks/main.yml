---
# uses inventory, but all actions are on localhost
- debug: msg="group deployer ssh "


- debug: msg="inventory_hostname {{ inventory_hostname }} "
  ignore_errors: True
  changed_when: False


- name: users ssh client config
  template: src=ssh_client_conf.j2 dest=~/.ssh/config
  delegate_to: localhost
  changed_when: False


- name: put inventory into etc hosts
  template: src=etc_hosts.j2 dest=/etc/hosts
  delegate_to: localhost
  become: yes
  changed_when: False


- name: add host to known hosts - StrictHostKeyChecking FALSE
  shell: ssh -o StrictHostKeyChecking=false pi@{{ inventory_hostname }}.local hostname
  delegate_to: localhost
  changed_when: False
  ignore_errors: True
